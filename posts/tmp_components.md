---
layout: base-layout.njk
---
INPROGRESS

## Организация сети атомайз и ее компоненты.

(базовая статья, на которую нанизаем всё остальное)

Сеть HLF состоит из узлов - распределенной сети независимых станций, на которых развернуто специально ПО. Узлы бывают трех видов:
1. commitment peer - узел хранящий реестр и state. В общем случае, не содержит код бизнес логики (chaincode).
2. endorser - частный случай commitment peer, так же содержащий код бизнес логики (chaincode)
3. orderer - узел, участвующий в процессе создания блоков, реализующий честную очередь транзакций, а так же работающий в консенсусе с другими аналогичными узлами.

Взаимодействие между узлами производится через защищенные "сетевые каналы" связи (не путать с HLF channels), по специальному протоколу HLF. Любое общение в сети HLF сертифицировано, для чего все узлы создаются через "организации", каждая из которых имеет собственный сертификационный центр (MSP).

Каналы (channels) - главный механизм коммуникации между участниками сети, фундаментальная абстракция уровня HLF.

Организации (organisation) HLF, каналы (channel), chaincode, правила подключения новых узлов, политики валидации пользовательских транзакций (endorsment policy) - всё это вместе определяет топологию сети. Атомайз специфицирует топологию сети, оставляя клиентам ряд настроечных опций, такие как endorsment policy,  количество организаций - участников, и конечно же реализацию бизнес-логики, чейнкод.

### Принципы токенизации.

Чейнкод (chaincode) или смартконтракт в общей терминологии блокчейн - прогрограммное обеспечение, исполняемое на специальных узлах HLF, называемых ендорсерами (endorser).  Реализуются на языках golang, js. Так же чейнкод можно рассматривать как аналог хранимой процедуры БД SQL, или как некоторый код, реализующий бизнес логику предварительной обработки данных, с последующим  размещением результата в БД (стейте).

Пользовательские запросы к chaincode HLF делятся на два вида: query и invoke. Оба вида запросов обрабатываются на chaincode и отличаются только тем, что в процессе запроса query не производятся изменения в леджере - это запрос на чтение данных, а запрос invoke формирует транзакцию и изменият стейт леджера.

Обращение к чейнкоду производится через специальную библиотеку SDK, для работы с которой необходимо получить сертификат клиента одной из организаций HLF песочницы атомайз. SDK формирует запросы к endorser (transaction proposal), а так же запросы на ордеринг с ответом ендорсеров (transaction), при этом подписывает эти пакеты своим приватным ключом.  SDK реализован на golang и node js, таким образом клиентская часть получается достаточно объемной и требует реализации в виде отдельного приложения, что часто бывает неудобно для пользователя. Для упрощения процедуры доступа к БД, атомайз реализует процесс авторизации конечного пользователя через формирование запроса как "конверт в конверте". Как формируется клиентский конверт можно посмотреть здесь: (ссылка на раздел про ed25519).  Второй конверт, или конверт SDK, создается авторизованным программным обеспечением, сервисом HLF-Proxy (ссылку на раздел). При этом, так же остается возможность реализовать своё программное обеспечение для прямого доступа к песочнице атомайз через SDK (ссылка на документацию SDK HLF).

Атомайз не ограничевает творчество в области бизнес логики, но основной направленностью проекта является упрощение токенизации или виртуализация активов - именно в данной области можно получить готовые компоненты решения на основе объектной модели чейнкода атомайз. Объектная модель решает вопросы аккаунтинга, ведения балансов, межканальных взаимодействий, авторизации клиента, пакетной обработки данных.

- аккаунтинг и балансы (ссылка на accounting)

- ACL
— интерфейсы док (ждем от ньюити)

- написание нового чейнкода (ждем от ньюити)
- библиотека foundation (ждем от ньюити)
- наследование (ждем от ньюити)
- базовый токен, его интерфейсы (ждем от ньюити)

Размещение нового чейнкода в HLF - это комплексная процедура, требующая участия администраторов организаций и соблюдения правил построения распределенной сети и политик валидации пользовательских транзакций. В рамках песочницы данная процедура автоматизирована (ссылку на статью по развертке нового кода) и не требует больших усилий.

- установка чейнкода в песочницу

Каждый чейнкод размещается в отдельном канале, создание которых так же автоматизировано.
- Сылка на статью channels
